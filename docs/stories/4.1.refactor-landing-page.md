# Story 4.1: Refactor Landing Page to Remove Search Functionality

## Status
Ready for Review

## Story
**As a** user visiting the landing page,
**I want** to see compelling information about the lead generation tool,
**so that** I understand the value and can proceed to search when ready.

## Acceptance Criteria
1. **BC1**: All existing landing page content (Hero, Overview, LeadScore, QuickStart) remains intact and functional
2. **BC2**: LeadGenForm component is cleanly removed from Index.tsx without breaking imports or state
3. **BC3**: Two prominent CTAs ("Get Leads Now" and "Try It Free") navigate to new /search route
4. **BC4**: No console errors or broken functionality after refactor
5. **BC5**: All existing responsive behavior and styling preserved

## Tasks / Subtasks

- [x] **Task 1: Prepare Navigation Infrastructure** (AC: BC4)
  - [x] Add `/search` route placeholder with temporary component
  - [x] Verify route accessibility without errors
  - [x] Import `useNavigate` from React Router in affected components

- [x] **Task 2: Enhance HeroSection with CTAs** (AC: BC3, BC5)
  - [x] Add navigation hook to `src/components/ui/hero-section.tsx`
  - [x] Add CTA button section to OriginalHeroSection (after feature cards ~line 55)
  - [x] Add CTA button section to EnhancedHeroSection (after feature cards ~line 107)
  - [x] Implement "Get Leads Now" button with navigation to `/search`
  - [x] Implement "Try It Free" button with navigation to `/search?demo=true`
  - [x] Test responsive behavior on mobile and desktop

- [x] **Task 3: Remove LeadGenForm from Index.tsx** (AC: BC1, BC2, BC4)
  - [x] Remove LeadGenForm import from `src/pages/Index.tsx`
  - [x] Remove unused props (`restoredSearch`, `onSearchRestored`) from IndexProps interface
  - [x] Update component function signature to remove unused props
  - [x] Delete entire Lead Generation section (lines ~32-44)
  - [x] Test page loads successfully without console errors

- [x] **Task 4: Add Secondary CTAs** (AC: BC3, BC5)
  - [x] Add navigation to QuickStartInstructions component
  - [x] Add "Start Generating Leads" CTA at end of QuickStart section
  - [x] Ensure neumorphic styling consistency

- [x] **Task 5: Update Parent Components** (AC: BC4)
  - [x] Update App.tsx or router to remove unused prop passing to Index
  - [x] Clean up any orphaned state management

- [x] **Task 6: Quality Assurance Testing** (AC: BC1, BC4, BC5)
  - [x] Test all CTAs navigate correctly
  - [x] Verify no broken links or console errors
  - [x] Test responsive behavior on all screen sizes
  - [x] Verify accessibility (focus states, ARIA labels)
  - [x] Run lint and type checking

## Dev Notes

### Previous Story Insights
No previous stories exist - this is the first story in Epic 4.

### Component Architecture
[Source: CLAUDE.md#Directory Structure]
- **Pages Location**: `src/pages/` - Index.tsx is the main landing page
- **Components Location**: `src/components/` - Reusable UI components
- **UI Components**: `src/components/ui/` - shadcn/ui base components

### Technology Stack
[Source: docs/frontend-architecture/frontend-tech-stack.md]
- **Framework**: React with TypeScript
- **UI Library**: shadcn-ui for reusable components
- **Styling**: Tailwind CSS with neumorphic design system
- **Routing**: React Router for client-side navigation
- **Build Tool**: Vite

### Current Component Structure
[Source: Current codebase analysis]
- **Index.tsx**: Contains HeroSection, OverviewSection, LeadScoreCalculation, QuickStartInstructions, and LeadGenForm
- **HeroSection**: Has feature flags (useHeroV2) with OriginalHeroSection and EnhancedHeroSection variants
- **LeadGenForm**: Full search functionality component to be extracted and reused

### Critical Brownfield Constraints
[Source: Epic 4 requirements]
- **No Breaking Changes**: Must preserve all existing functionality
- **Component Reuse**: Extract, don't delete LeadGenForm - will be reused in Story 4.2
- **State Preservation**: Maintain all existing prop interfaces for backward compatibility
- **Authentication**: Must preserve existing auth flows and user management

### Neumorphic Design System
[Source: CLAUDE.md#Architecture Overview]
- Custom neumorphic design system implemented with Tailwind CSS
- Existing classes: `neu-element`, `neu-green`, `neu-orange`, `neu-raised`
- Must maintain design consistency across all new CTAs

### Real-time System Integration
[Source: CLAUDE.md#Critical System Components]
- **useLeadGeneration Hook**: Manages job lifecycle with real-time updates
- **Supabase Integration**: Real-time subscriptions for job and lead updates
- **N8N Workflow**: Must preserve existing webhook triggers
- These systems must remain untouched in this story

### File Locations for New Code
[Source: docs/frontend-architecture/project-structure.md]
- **Route Components**: `src/pages/` - New Search.tsx will go here in Story 4.2
- **UI Enhancements**: `src/components/ui/hero-section.tsx` - Add CTAs here
- **Custom Components**: `src/components/` - QuickStartInstructions.tsx for secondary CTA

### Testing
**Testing Standards**: 
[Source: CLAUDE.md#Development Workflow]
- **Unit Tests**: For critical business logic (hooks, utilities)
- **Component Tests**: For complex UI interactions  
- **Framework**: Vitest with jsdom environment
- **Commands**: `npm run test` or `npm run test:watch`
- **Coverage**: `npm run coverage`
- **Quality Gates**: `npm run lint` and TypeScript checking

**Testing Requirements for This Story**:
- Test CTA button functionality and navigation
- Verify responsive behavior across screen sizes
- Test accessibility features (keyboard navigation, screen readers)
- Regression test existing components remain functional
- Test with feature flags enabled/disabled for hero variants

**Test File Locations**:
- Component tests should follow pattern: `src/components/__tests__/ComponentName.test.tsx`
- Integration tests for navigation flow between pages

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-02 | 1.0 | Initial story creation | Scrum Master Bob |
| 2025-01-02 | 1.1 | Status updated to Approved | Scrum Master Bob |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
Claude Sonnet 4 (claude-sonnet-4-20250514)

### Debug Log References
No debug log entries required for this implementation

### Completion Notes List
- Successfully implemented all CTA buttons with proper navigation
- Maintained neumorphic design system consistency throughout
- All existing content and functionality preserved as required
- Navigation routes properly configured with authentication protection
- TypeScript compilation successful with no new errors
- Responsive behavior implemented and tested

### File List
**Created Files:**
- `src/pages/Search.tsx` - Placeholder search page

**Modified Files:**
- `src/App.tsx` - Added /search route, cleaned up unused props
- `src/components/ui/hero-section.tsx` - Added navigation and CTA buttons to both hero variants
- `src/components/QuickStartInstructions.tsx` - Added navigation and secondary CTA button
- `src/pages/Index.tsx` - Removed LeadGenForm import and section, cleaned up interface

## QA Results

### Review Date: 2025-09-02

### Reviewed By: Quinn (Test Architect)

**Implementation Quality Assessment:**
- ✅ All acceptance criteria successfully implemented
- ✅ Navigation infrastructure properly configured with authentication protection
- ✅ CTA buttons implemented with consistent neumorphic styling across both hero variants
- ✅ Clean removal of LeadGenForm without breaking existing functionality
- ✅ Responsive behavior maintained throughout all components
- ✅ TypeScript compilation successful with no new errors
- ✅ No console errors or broken functionality detected

**Code Quality:**
- ✅ Proper separation of concerns maintained
- ✅ Consistent with existing design system patterns
- ✅ Clean component interfaces and prop management
- ✅ Accessibility features (ARIA labels) properly implemented

**Testing Status:**
- ✅ Manual verification completed successfully
- ✅ All navigation paths function correctly
- ✅ Pre-existing test suite status unchanged (no regressions introduced)

### Gate Status

Gate: PASS → docs/qa/gates/4.1-refactor-landing-page-to-remove-search-functionality.yml